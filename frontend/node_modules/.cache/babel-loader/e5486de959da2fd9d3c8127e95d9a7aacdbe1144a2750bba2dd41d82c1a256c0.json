{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */function (_super) {\n  __extends(YearEvent, _super);\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n    _this.isResource = false;\n    return _this;\n  }\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n    this.renderedEvents = [];\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n        if (!this.parent.isMinMaxDate(start)) {\n          continue;\n        }\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n        if (filterEvents.length > 0) {\n          var workCell = workCells[parseInt(index.toString(), 10)];\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n      }\n    }\n  };\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var _this = this;\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n    this.cellWidth = workCell.getBoundingClientRect().width;\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n    var groupIndex = this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : undefined;\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n          td = dayIndex + 1;\n          eventWrapper = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n          if (!eventWrapper) {\n            eventWrapper = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper);\n          }\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n          var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n          if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n        var this_1 = this;\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n    if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n      var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var app = [].slice.call(ele.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;\n        app.forEach(function (app) {\n          var overlap = parseInt(app.getAttribute('data-index'), 10);\n          app.style.top = appTop + overlap * _this.eventHeight + 'px';\n          app.removeAttribute('data-index');\n        });\n      });\n    }\n  };\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth() || isLeftRightResize && this.isResource && dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n    eventObj.data = data;\n  };\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var _this = this;\n    var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.getBoundingClientRect().width;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n          this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    }\n    if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n      var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n      appointments.forEach(function (ele) {\n        ele.style.removeProperty('left');\n        ele.style.removeProperty('right');\n      });\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n      var conTable_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var appWrapper = [].slice.call(ele.children);\n        var row = tr_2[parseInt(index.toString(), 10)];\n        appWrapper.forEach(function (appWrap, cellIndex) {\n          var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n          var app = [].slice.call(appWrap.children);\n          var width = td.getBoundingClientRect().width;\n          var left = td.offsetLeft;\n          if (_this.parent.enableRtl) {\n            var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.right = right_1 + 'px';\n            });\n          } else {\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.left = left + 'px';\n            });\n          }\n        });\n      });\n    }\n  };\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n    var isSpannedCollection = [];\n    var _loop_2 = function (a) {\n      var data = eventDatas[parseInt(a.toString(), 10)];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n      if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n      var availedHeight = this_2.cellHeader + this_2.eventHeight * (a + 1) + EVENT_GAP + this_2.moreIndicatorHeight;\n      var leftValue = this_2.parent.activeViewOptions.orientation === 'Vertical' ? month * this_2.cellWidth : index * this_2.cellWidth;\n      if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n        return {\n          value: void 0\n        };\n      }\n      if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n        if (isRendered.length > 0 || isSpanned.length > 0) {\n          return \"continue\";\n        }\n      }\n      if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n        this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this_2.updateCellHeight(td, availedHeight);\n        isSpannedCollection.push(eventData);\n      } else {\n        var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n        if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n        return \"break\";\n      }\n    };\n    var this_2 = this;\n    for (var a = 0; a < eventDatas.length; a++) {\n      var state_1 = _loop_2(a);\n      if (typeof state_1 === \"object\") return state_1.value;\n      if (state_1 === \"break\") break;\n    }\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n    }\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      wrap.setAttribute('data-index', eventObj.Index.toString());\n    }\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n        _this.wireAppointmentEvents(wrap, eventObj);\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n    var endDate;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n        templateElement.push(subjectEle);\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n    var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n    var yearEnd = util.addMonths(yearStart, this.parent.monthsCount);\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n      this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n      var originalStartTime = eventData[this.fields.startTime];\n      var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n      isSpanned.count = originalEndTime.getMonth() - originalStartTime.getMonth() + this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear()) + 1;\n    } else {\n      this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n      if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n        var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n        var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n        if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n          end = util.addDays(new Date(end), -1).getTime();\n        }\n        isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n      }\n    }\n    eventData.isSpanned = isSpanned;\n    if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n    if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n    return eventData;\n  };\n  YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n    if (eventStart.getTime() < viewStart.getTime()) {\n      eventObj[this.fields.startTime] = viewStart;\n      isSpanned.isLeft = true;\n    }\n    if (eventEnd.getTime() > viewEnd.getTime()) {\n      eventObj[this.fields.endTime] = viewEnd;\n      isSpanned.isRight = true;\n    }\n  };\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n      var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart : util.resetTime(appEnd).getTime() >= dateStart;\n      if (util.resetTime(appStart).getTime() <= dateStart && timeCondition || util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n        appointmentsList.push(app);\n      }\n    }\n    return appointmentsList;\n  };\n  YearEvent.prototype.getMonths = function () {\n    var _this = this;\n    // eslint-disable-next-line prefer-spread\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.parent = null;\n  };\n  return YearEvent;\n}(TimelineEvent);\nexport { YearEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","dragAndDropModule","setDragArea","fields","eventFields","elementSelector","currentView","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","months","getMonths","months_1","month","queryString","indexOf","workCells","monthDate","Date","selectedDate","getFullYear","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","isMinMaxDate","filterEvents","eventBase","workCell","parseInt","toString","appendChild","className","querySelector","WORK_CELLS_CLASS","OTHERMONTH_CLASS","cellWidth","getBoundingClientRect","width","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","groupIndex","undefined","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","enableRtl","getDate","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","dayEvents","sortByDateTime","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","moreIndicatorHeight","appArea","renderedAppCount","Math","floor","moreIndicatorCount","isRendered","filter","eventObj","Guid","isSpanned","MoreIndicator","moreIndex","renderMoreIndicator","rowAutoHeight","renderEvent","updateCellHeight","push","appContainer","tr_1","CONTENT_TABLE_CLASS","forEach","ele","app","appTop","offsetTop","overlap","getAttribute","style","top","removeAttribute","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","contentTable","CONTENT_WRAP_CLASS","isVerticalScrollbarAvail","offsetWidth","clientWidth","allowVirtualScrolling","renderedResources","i","len","renderResourceEvent","appointments","removeProperty","conTable_1","tr_2","appWrapper","children","appWrap","cellIndex","left","offsetLeft","right_1","right","lastDateOfMonth","eventDatas","rowIndex","groupOrder","_loop_2","a","this_2","isSpannedEvent","value","state_1","wrap","createEventElement","setAttribute","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","localeObj","getConstant","attrs","id","getReadonlyAttribute","getAnnouncementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderSpannedIcon","renderResizeHandler","applyResourceColor","eventStart","eventEnd","yearStart","firstMonthOfYear","yearEnd","addMonths","monthsCount","updateSpannedEventDetails","originalStartTime","originalEndTime","ceil","MS_PER_DAY","minDate","maxDate","viewStart","viewEnd","getOverlapEvents","date","appointmentsList","dateStart","dateEnd","appointments_1","appStart","appEnd","timeCondition","apply","map","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","rows","rows_1","firstElementChild","height","destroy"],"sources":["C:/react_test/my-app/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n                if (!this.parent.isMinMaxDate(start)) {\n                    continue;\n                }\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[parseInt(index.toString(), 10)];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var _this = this;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n        this.cellWidth = workCell.getBoundingClientRect().width;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        var groupIndex = (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive) ?\n            this.parent.uiStateValues.groupIndex : undefined;\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n                    td = dayIndex + 1;\n                    eventWrapper = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper) {\n                        eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var app = [].slice.call(ele.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n                var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;\n                app.forEach(function (app) {\n                    var overlap = parseInt(app.getAttribute('data-index'), 10);\n                    app.style.top = appTop + (overlap * _this.eventHeight) + 'px';\n                    app.removeAttribute('data-index');\n                });\n            });\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) ||\n            (isLeftRightResize && this.isResource && (dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()))) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var _this = this;\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.getBoundingClientRect().width;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources :\n                this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n            var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            appointments.forEach(function (ele) {\n                ele.style.removeProperty('left');\n                ele.style.removeProperty('right');\n            });\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var conTable_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var appWrapper = [].slice.call(ele.children);\n                var row = tr_2[parseInt(index.toString(), 10)];\n                appWrapper.forEach(function (appWrap, cellIndex) {\n                    var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n                    var app = [].slice.call(appWrap.children);\n                    var width = td.getBoundingClientRect().width;\n                    var left = td.offsetLeft;\n                    if (_this.parent.enableRtl) {\n                        var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.right = right_1 + 'px';\n                        });\n                    }\n                    else {\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.left = left + 'px';\n                        });\n                    }\n                });\n            });\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        var isSpannedCollection = [];\n        var _loop_2 = function (a) {\n            var data = eventDatas[parseInt(a.toString(), 10)];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this_2.cellHeader + (this_2.eventHeight * (a + 1)) + EVENT_GAP + this_2.moreIndicatorHeight;\n            var leftValue = (this_2.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this_2.cellWidth : index * this_2.cellWidth;\n            if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n                return { value: void 0 };\n            }\n            if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                if (isRendered.length > 0 || isSpanned.length > 0) {\n                    return \"continue\";\n                }\n            }\n            if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n                this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this_2.updateCellHeight(td, availedHeight);\n                isSpannedCollection.push(eventData);\n            }\n            else {\n                var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_2 = this;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var state_1 = _loop_2(a);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            wrap.setAttribute('data-index', eventObj.Index.toString());\n        }\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n        var yearEnd = util.addMonths(yearStart, this.parent.monthsCount);\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n            var originalStartTime = eventData[this.fields.startTime];\n            var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n            isSpanned.count = (originalEndTime.getMonth() - originalStartTime.getMonth()) +\n                (this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear())) + 1;\n        }\n        else {\n            this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n            if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n                var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n                var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n                if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                    end = util.addDays(new Date(end), -1).getTime();\n                }\n                isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n            }\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n        if (eventStart.getTime() < viewStart.getTime()) {\n            eventObj[this.fields.startTime] = viewStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > viewEnd.getTime()) {\n            eventObj[this.fields.endTime] = viewEnd;\n            isSpanned.isRight = true;\n        }\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                util.resetTime(appEnd).getTime() >= dateStart;\n            if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}